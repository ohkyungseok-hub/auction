<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>백오피스 로그인 - 마켓베르데</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-top">
            <div class="container">
                <div class="logo">마켓베르데 <span class="admin-badge">백오피스</span></div>
                <div class="header-right">
                    <a href="index.html" class="back-link">← 홈으로</a>
                </div>
            </div>
        </div>
    </header>

    <main class="login-container">
        <div class="login-box">
            <h1>백오피스 로그인</h1>
            <p class="login-subtitle">관리자 전용 페이지입니다</p>
            
            <form id="admin-login-form">
                <div class="form-group">
                    <label for="admin-id">관리자 ID</label>
                    <input type="text" id="admin-id" required placeholder="관리자 ID를 입력하세요">
                </div>
                
                <div class="form-group">
                    <label for="admin-password">비밀번호</label>
                    <input type="password" id="admin-password" required placeholder="비밀번호를 입력하세요">
                </div>

                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="remember-admin">
                        <span>로그인 상태 유지</span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary btn-block">로그인</button>
            </form>

            <div class="admin-info">
                <p class="info-text">※ 기본 관리자 계정</p>
                <p class="info-text">ID: admin</p>
                <p class="info-text">비밀번호: admin123</p>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>마켓베르데</h3>
                    <p>회사명: 에이포스</p>
                    <p>대표자: 황지후</p>
                </div>
                <div class="footer-links">
                    <a href="index.html">홈</a>
                    <a href="index.html#products">경매 목록</a>
                    <a href="register.html">경매 등록</a>
                    <a href="http://localhost:8000/index.html#best">마켓베르데 쇼핑몰</a>
                    <a href="backoffice.html">백오피스</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 마켓베르데 (에이포스). All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="api_client.js"></script>
    <script>
        // 관리자 로그인 폼 처리 (비동기)
        document.getElementById('admin-login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const adminId = document.getElementById('admin-id').value.trim();
            const adminPassword = document.getElementById('admin-password').value;
            const rememberMe = document.getElementById('remember-admin').checked;
            
            // 데이터베이스에서 관리자 인증
            const admin = await adminLogin(adminId, adminPassword);
            
            if (admin) {
                // 관리자 로그인 정보 저장
                const adminLoginData = {
                    id: admin.id,
                    name: admin.name,
                    type: 'admin',
                    loginTime: new Date().toISOString()
                };
                
                if (rememberMe) {
                    localStorage.setItem('adminUser', JSON.stringify(adminLoginData));
                } else {
                    sessionStorage.setItem('adminUser', JSON.stringify(adminLoginData));
                }
                
                alert('관리자 로그인 성공!');
                window.location.href = 'backoffice.html';
            } else {
                alert('관리자 ID 또는 비밀번호가 올바르지 않습니다.');
            }
        });
    </script>
</body>
</html>
